\documentclass[a4paper,11pt]{book}
\usepackage[ruled,boxed]{algorithm2e} 
\usepackage[fleqn,reqno]{amsmath}
\usepackage{amsfonts}
\usepackage{amssymb}
\usepackage{a4wide}
\usepackage{graphicx}
\usepackage{fancyhdr}
\usepackage[utf8]{inputenc}
\usepackage[french,english]{babel}
\usepackage{natbib} %% citations
\usepackage{hyperref}
\usepackage{caption}
\usepackage{subfigure}
\usepackage{color} 
\usepackage{xspace}
%%\usepackage{slashbox} %% no longer in texlive
\usepackage{diagbox} %% replacement
\usepackage{pdfpages}
\usepackage{marvosym}
\usepackage{anysize}
\usepackage{makeidx}
\usepackage{xspace}
\usepackage{fancyvrb, listings, color}
\usepackage[usenames,dvipsnames,svgnames,table]{xcolor}
%%
\usepackage{python}

%%% Python (kind of important)
\lstloadlanguages{Python}

\definecolor{gogetit}{HTML}{6C8B9F}


%%% Margins

\marginsize{2cm}{2cm}{2cm}{2cm}

%%% indexation
\makeindex

%%% very strange missing counter within pdflatex
\newcounter{Hy@AnnotLevel}

%% a real new counter for custom python listings
\newcounter{codein}
\setcounter{codein}{0}
\newcommand{\pylabel}[1]{\refstepcounter{codein}\label{#1}}

%% fraction texte sur figure moins conservatrice
\renewcommand{\topfraction}{.85}
\renewcommand{\bottomfraction}{.7}
\renewcommand{\textfraction}{.15}
\renewcommand{\floatpagefraction}{.66}
\renewcommand{\dbltopfraction}{.66}
\renewcommand{\dblfloatpagefraction}{.66}

%%%%%%%%%%%%%% Useful macros %%%%%%%%%%%%%%%%%%%%%%%%%%

\newenvironment{myitem}{\begin{list}{$\bullet$}{\partopsep 0pt plus 1pt
\topsep 0pt plus 1pt \itemsep 0pt \labelwidth 5pt}}{\end{list}}

\newenvironment{myit}{\begin{list}{$-$}{\partopsep 0pt plus 1pt
\topsep 0pt plus 1pt \itemsep 0pt \labelwidth 5pt}}{\end{list}}

\catcode`\@=11\relax
\def\rightarrowfill{$\m@th \mathord- \mkern-6mu
  \cleaders\hbox{$\mkern-2mu \mathord- \mkern-2mu$}\hfill
  \mkern-6mu \mathord\rightarrow$}

\def\vector#1{\vbox{\ialign{##\crcr
     \rightarrowfill\crcr\noalign{\kern-1pt\nointerlineskip}
     $\hfil\displaystyle{#1}\hfil$\crcr}}}
\catcode`\@=12\relax


\newcommand{\Pink}{{\sc Pink}\xspace}
\renewcommand{\figurename}[0]{Figure}

\pagestyle{fancyplain}
\addtolength{\headheight}{8pt}
\renewcommand{\chaptermark}[1]{\markboth{#1}{#1}}
\renewcommand{\sectionmark}[1]{\markright{\thesection\ #1}}
 \lhead[\fancyplain{}{\bf\thepage}]{\fancyplain{}{\bf\rightmark}}
 \rhead[\fancyplain{}{\bf\leftmark}]{\fancyplain{}{\bf\thepage}}
 \cfoot{}


%\pssilent
\tolerance10000
\emergencystretch40pt
\sloppy


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%% Option pour le style frenchb

\ThinSpaceInFrenchNumbers
\addto\captionsfrench{\def\CaptionSeparator{\space\textemdash\space}}


%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%% liste des inclusions


%\includeonly{titlepage}

\renewcommand{\newline}{~ \par}


%%
%% The document starts here
%%


\begin{document}

%% Listings

\fvset{numbers=left,numbersep=3pt,fontsize=\small,fontfamily=helvetica,frame=lines,resetmargins=true}  

\lstset{
  language=Python,
  fancyvrb=true,
  showstringspaces=false,
  tabsize=4,
  keywordstyle=\color{blue}\textbf,
  identifierstyle=,
  commentstyle=\color{gogetit}\textit,
  stringstyle=\color{red},
}



\include{titlepage}

\include{dedicace}

%%%%%% Table of Contents

\emergencystretch40pt
\setcounter{secnumdepth}{3}
\setcounter{tocdepth}{3}

\thispagestyle{empty}
\addcontentsline{toc}{chapter}{Table of contents}
\tableofcontents

%% All the chapters
\include{00_introduction}

\include{01_tutorial}


\appendix
\include{A00_installing}



\include{A01_function_reference}

\include{licence}

%------------------------- Table des symboles ---------------------
%\include{symbol}

%------------------------- table des figures -----------------------
%\thispagestyle{empty}
\addcontentsline{toc}{chapter}{Table of figures}
\listoffigures

%------------------------- table des tables -----------------------
%\thispagestyle{empty}
\addcontentsline{toc}{chapter}{List of tables}
\listoftables

%------------------------- La biblio ------------------------------
%\bibliographystyle{alpha_hut}
\bibliographystyle{apalike}
\addcontentsline{toc}{chapter}{Bibliography}
\bibliography{/Users/talbot/text/TeX/bibs/talbotOnly,/Users/talbot/text/TeX/bibs/talbotOthers}

%------------------------- Index ----------------------------------
%\thispagestyle{empty}
\addcontentsline{toc}{chapter}{Index}
\printindex

\end{document}